<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Jump'n'Covid/Corona?</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        canvas {
            background: #eee;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
<canvas id="myCanvas" width="480" height="320"></canvas>

<script>
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");

    //vars for moving virus
    var x = canvas.width;
    var y = canvas.height - 30;
    var dx = 1;

    //vars for jump human
    var xHum = canvas.height -20;
    var dxHum = 1;

    //event Handler
    var spacePressed = false;
    document.addEventListener("keydown",keyDownHandler,false);

    function keyDownHandler(e){
        if(e.keyCode === 32){
            spacePressed=true;
        }
    }

     //draw of static red block
     function drawHuman() {
        ctx.beginPath();
        ctx.rect(canvas.width/2, xHum, 20, 20
        ); //TODO change with pic of human
        ctx.fillStyle = "red";
        ctx.fill();
        ctx.closePath();
    }

    //draw of moving green block
    function drawVirus() {
        ctx.beginPath();
        ctx.rect(x, y, 20, 50); //TODO change with pic of virus
        ctx.fillStyle = "green";
        ctx.fill();
        ctx.closePath();
    }

    function score() {
        //TODO count score
    }
    function collision() {
        //TODO detect if human touches virus
    }

    function faster() {
        //TODO make game faster with every point
    }

    //set Jump parameters
    var jumpHeight = 0;
    var jumpSpeed = 2;
    var goingUp = false;
    function draw() {
        
        //clear all drawings
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        //jump logic
        if(jumpHeight<=0){
            xHum=canvas.height-20;
        }
        else{
            if(goingUp){
                xHum = xHum - jumpSpeed;
                if(xHum < canvas.height - 20 - jumpHeight){
                    goingUp=false;
                }
            }
            else{
                xHum = canvas.height - 20 - jumpHeight;
                jumpHeight = jumpHeight-jumpSpeed;
            }
        }
        //print objects
        drawVirus();
        drawHuman();

        //checks if spacebar is pressed and goes up and down
        if(spacePressed){
            jumpHeight=80;
            spacePressed=false;
            goingUp = true;
        }

        //if virus at left end, then move back to right end
        if (x + dx < 0) {
            x = canvas.width;
        }

        //change x value => change pos of Virus
        x -= dx;
    }



    //calls draw ever 10 mil.secs
    setInterval(draw, 10);
</script>
</body>
</html>
